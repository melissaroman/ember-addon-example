const { configForDeployTarget } = require('ticketfly-ember-env');

module.exports = function(environment, opts = {}) {
  const segmentKey = configForDeployTarget(opts.segmentKeys);

  if (environment === 'test') {
    return [
      {
        name: 'SegmentStub',
        environments: ['all'],
        config: {}
      }
    ];
  } else if (segmentKey) {
    return [
      {
        name: 'Segment',
        environments: ['production'],
        config: { key: segmentKey }
      }
    ];
  } else {
    return [];
  }
};
