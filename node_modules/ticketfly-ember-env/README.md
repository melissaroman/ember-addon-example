# Ticketfly Ember Environments

This is a node module that contains a number of functions to assist
with determining Deploy-target-specific configuration. Ideally, this
will be a one-stop-shop for any Environment variables that Rundeck
makes available upon deploying

## Environment Variables

You can also easily fetch certain environment variables including
the Deploy Target (`dev14`, `stage02`, etc) and the App Name:

```js
const { tflyEnvironment, appName } = require('ticketfly-ember-env').environment;

console.log(tflyEnvironment); // dev14
console.log(appName); // account-web
```

## Config for Deploy Target

Given this environment script:

```js
// config/environment.js
const { configForDeployTarget } = require('ticketfly-ember-env');

module.exports = function(environment) {
  return {
    apiURL: configForDeployTarget({
      default: 'localhost:9000',
      dev$(environment, appName) {
        return `https://${environment}-api.ticketfly.com/${appName}`;
      },
      stage$: 'https://consumer-api-service-stage02.tflystage.com',
      prod$: 'https://api.ticketfly.com'
    })
  };
};
```

Then, if we're developing locally (ie: `process.env.TFLY_DEPLOY_TARGET`)
is not set, the our resulting environment would be:

```js
{ apiURL: 'localhost:9000' }
```

If `TFLY_DEPLOY_TARGET=dev14`, then the result would be:

```js
{ apiURL: 'https://dev14-api.ticketfly.com/account-web' }
```

If `TFLY_DEPLOY_TARGET=prod02`, then the result would be:

```js
{ apiURL: 'https://api.ticketfly.com' }
```
